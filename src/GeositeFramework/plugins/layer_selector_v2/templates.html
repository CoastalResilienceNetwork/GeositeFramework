<script type="text/template" id="plugin">
    <div class="layer-selector2">
        <div class="filter-container"></div>
        <div class="tree-container"></div>
    </div>
</script>

<script type="text/template" id="filter">
    <input type="text" class="filter" placeholder="Filter Map Layers" value="<%- filterText %>" />
    <a href="javascript:;" class="clear">Reset Layers</a>
</script>

<script type="text/template" id="tree">
    <ul><%= _.map(layers, renderLayer).join('') %></ul>
</script>

<script type="text/template" id="layer">
    <li class="<%- cssClass %>">
        <a href="javascript:;" data-layer-id="<%- layer.id() %>" style="padding-left: <%- indent * 10 %>px">

        <span class="node-icon">
        <% if (layer.hasChildren()) { %>
            <% if (isSelected) { %>
                <i class="icon-down-dir"></i>
            <% } else { %>
                <i class="icon-right-dir"></i>
            <% } %>
        <% } else { %>
            <i class="icon-database"></i>
        <% } %>
        </span>

        <%= layer.getDisplayName() %>
        <% if (layer.getServiceId()) { %><%- layer.getServiceId() %><% } %>

        </a>

        <% if (!layer.hasChildren()) { %>
        <div class="layer-tools">
            <a href="javascript:;" class="show"><i class="icon-eye<% if (!isSelected) { %>-off<% } %>"></i></a>
            <a href="javascript:;" class="info"><i class="icon-info-circled"></i></a>
            <a href="javascript:;" class="more"><i class="icon-ellipsis"></i></a>
        </div>
        <% } %>

    <% if (layer.hasChildren() && isSelected) { %>
        <ul><%= _.map(layer.getChildren(), renderLayer).join('') %></ul>
    <% } %>
    </li>
</script>