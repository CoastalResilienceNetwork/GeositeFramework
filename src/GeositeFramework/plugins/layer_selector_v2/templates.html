<script type="text/template" id="plugin">
    <div class="layer-selector2">
        <div class="filter-container"></div>
        <div class="tree-container"></div>
        <div class="info-box-container"></div>
        <div class="layer-menu-container"></div>
    </div>
</script>

<script type="text/template" id="filter">
    <input type="text" class="filter" placeholder="Filter Map Layers" value="<%- filterText %>" />
    <a href="javascript:;" class="reset">Reset Layers</a>
</script>

<script type="text/template" id="tree">
    <ul><%= _.map(tree.getChildren(), renderLayer).join('') %></ul>
</script>

<script type="text/template" id="layer">
    <li class="<%- cssClass %>" data-layer-id="<%- layer.id() %>">
        <a href="javascript:;" class="layer-row" style="padding-left: <%- indent * 15 %>px">

        <span class="layer-icon">
        <% if (layer.isFolder()) { %>
            <% if (isExpanded) { %>
                <i class="icon-down-dir"></i>
            <% } else { %>
                <i class="icon-right-dir"></i>
            <% } %>
        <% } else { %>
            <i class="icon-database"></i>
        <% } %>
        </span>

        <span class="layer-name">
            <%= layer.getDisplayName() %>
            <% if (layer.getServiceId()) { %><%- layer.getServiceId() %><% } %>
        </span>

        </a>

        <% if (!layer.isFolder()) { %>
        <div class="layer-tools">
            <a href="javascript:;" class="show"><i class="icon-eye<% if (!isSelected) { %>-off<% } else { %> active <% } %>"></i></a>
            <a href="javascript:;" class="info"><i class="icon-info-circled <% if (infoBoxIsDisplayed) { %> active <% } %>"></i></a>
            <a href="javascript:;" class="more"><i class="icon-ellipsis"></i></a>
        </div>
        <% } %>

    <% if (layer.isFolder() && isExpanded) { %>
        <%= _.map(layer.getChildren(), renderLayer).join('') %>
    <% } %>
    </li>
</script>

<script type="text/template" id="info-box">
    <div class="info-box">
        <div class="close">&#10006;</div>
        <div class="body">
            <div class="description">
                <div class="info-label"><%= layer.getDisplayName() %></div>
                <div class="info-value"><%= layer.getDescription() %></div>
            </div>
        </div>
    </div>
</script>

<script type="text/template" id="layer-menu">
    <div class="layer-selector2-layer-menu" id="<%= id %>" data-layer-id="<%- layer.id() %>">
        <ul>
            <% if (layer.getDownloadUrl()) { %>
                <li><a href="<%- layer.getDownloadUrl() %>" target="_blank" class="download"><i class="icon-download"></i> Download</a></li>
            <% } %>
            <li><a href="javascript:;" class="zoom"><i class="icon-zoom-in"></i> Zoom to Extent</a></li>
            <% if (supportsOpacity) { %>
                <li><a><i class="icon-ajust"></i> Opacity</a></li>
                <li class="slider"><input type="range" min="0" max="1" step=".1" value="<%= opacity %>"/></li>
            <% } %>
        </ul>
    </div>
</script>
